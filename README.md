# CodeScribe Tutorial Repository

This repository provides hands-on examples for testing and exploring **[CodeScribe](https://github.com/akashdhruv/CodeScribe)** â€” a code translation and generation framework that leverages LLMs for scientific computing applications.

## Overview

This tutorial demonstrates three key CodeScribe capabilities:

1. **Code Translation** â€” Convert Fortran source files into interoperable C++ equivalents.
1. **Code Generation** â€” Generate new source files or small applications from natural-language prompts.
1. **Code Update** â€” Modify or extend existing source files using an instruction file.

Each section below includes the exact command-line instructions for testing these capabilities.

## Prerequisites

Before running the examples, make sure you have:

- Installed **CodeScribe** and its dependencies\
  *(see [CodeScribe Installation Guide](https://github.com/akashdhruv/CodeScribe))*
- Access to a configured model such as **`argo-gpt4o`**. Argo models are available on Argonne network by setting `ARGO_USER` and `ARGO_API_ENDPOINT` environment variables.
- Cloned this tutorial repository:
  ```bash
  git clone https://github.com/akashdhruv/codescribe-tutorial.git
  cd codescribe-tutorial
  ```

## 1. Code Translation Task

Use CodeScribe to translate Fortran source files (e.g., `Initialize.F90`) into interoperable C++ files.

### Steps

```bash
cd codescribe-tutorial/src

# Step 1: Index all files in the current directory
code-scribe index .

# Step 2: Run the translation process
code-scribe translate Initialize.F90 -p ../prompts/code_translation.toml -m argo-gpt4o
```

### Output

This will generate the following files to replace `Initialize.F90`:

```
Initialize.hpp
Initialize.cpp
Initialize_fi.F90
```

These can be directly integrated with the rest of the source code.

## 2. Code Generation Task

Use CodeScribe to generate new application files based on a TOML prompt.

### Steps

```bash
cd codescribe-tutorial
code-scribe generate prompts/code_generation.toml -m argo-gpt4o
```

Generate command can also be executed using single line prompts instead of
a seed prompt file. See example below.

### Output

This will generate a complete application inside the `generated-src/` directory.

```
generated-src/
â”œâ”€â”€ main.cpp
â”œâ”€â”€ message.cpp
â”œâ”€â”€ message.h
â””â”€â”€ Makefile
```

## 3. Updating Existing Files

Use CodeScribe to update existing source files (e.g., after modifying design or structure).

### Steps

```bash
code-scribe update generated-src/main.cpp  generated-src/Makefile -p prompts/code_update.toml -m argo-gpt4o
```

Similar to generate command single line prompts can be used in place of a prompt file. See example below.

### Output

This updates the specified files (`main.cpp` and `Makefile`) according to the update logic in `prompts/code_update.toml`.

## Notes

- The `-m` flag specifies the model to use. Replace `argo-gpt4o` with another model if needed.
- All prompts are located in the `prompts/` directory.
- The generated files can be rebuilt or re-generated by re-running the same commands.

## Repository Structure

```
codescribe-tutorial/
â”œâ”€â”€ src/                         # Sample source files for translation
â”œâ”€â”€ prompts/                     # TOML prompt files for each task
â”œâ”€â”€ generated-src/               # Output directory for generated code
â”œâ”€â”€ include/                     # Include directory for hpp files
â””â”€â”€ README.md                    # This file
```

## ðŸ§¾ Example Workflow

```bash
# 1. Translate a Fortran source file
cd codescribe-tutorials/src
code-scribe index .
code-scribe translate Initialize.F90 -p ../prompts/code_translation.toml -m argo-gpt4o

# 2. Generate a new example application
cd codescribe-tutorials
code-scribe generate prompts/code_generation.toml -m argo-gpt4o

# 3. Generate using single line query
cd codescribe-tutorials
code-scribe generate "Write prompts/code_complicated.toml to generate a more complicated application" \
                     -r prompts/code_generation.toml -m argo-gpt4o

# Generate source code for the application
code-scribe generate prompts/code_complicated.toml -m argo-gpt4o

# 4. Update existing generated files
code-scribe update generated-src/main.cpp generated-src/Makefile -p  prompts/code_update.toml -m argo-gpt4o

# 5. Update files using single line query
cod-scribe update src/main.ccp -p "Write a detailed documentation for the file" -m argo-gpt4o
```

## Additional Resources

- **Main CodeScribe Repository:** [https://github.com/akashdhruv/CodeScribe](https://github.com/akashdhruv/CodeScribe)
- **License:** Apache License

**Happy coding with CodeScribe!**
